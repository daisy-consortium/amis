This directory contains the source for PyAmisCore, a between
Python and C++ to allow embedding AmisCore in Python.

The bridge is automatically generated by parsing the AmisCore header files
and generating the bridge methods and objects from the function and method
signatures. As of this writing (January 2006) generating the bridge requires
a development-Python (from the svn repository) because it uses a version of
the bgen tool that is newer than in the most recent Python distribution.
Once the bridge has been created it can be compiled for a normal distribution
Python, though.

Whenever the AmisCore header files have changed significantly the bridge
source code will have to be rebuilt. This is done by running
"make regenerate-pyamiscore". This depends on a number of Python sourcefiles
that may also need some adjustments, see below.

Bgen is not well documented, and that is an understatement. There is something of
an overview at <http://homepages.cwi.nl/~jack/presentations/nluug-praatje.pdf>
but it is geared towards one specific application (Ambulant). The corresponding
slides for that talk are at
<http://homepages.cwi.nl/~jack/presentations/nluug-bgen-slides.pdf>.

The source files in this directory are:

bgenCxxSupport.py:
	These are extensions for bgen to allow it to generate a C++ bridge
	(in stead of a C bridge).
setup.py:
	Standard Python distutils build script, which builds the extension module.
	May need modifications if new libraries are added, etc.
genobjects.py:
	Script that governs which C++ header files are read, which C++ classes are
	Python-visible, their Python name and (optionally) their Python inheritance.
	May need to be modified if new classes are added that need to be visible
	in Python.
amiscoregen.py, amiscoreincludegen.py, amiscoreobjgen.py and amiscoretypetest.py:
	Intermediate files, may or may not be available. Leave them alone. (Or
	read them, share them with your friends, enjoy them, whatever. Just don't
	modify them:-)
amiscoresupport.py:
	Second pass of the generation process, contains the type declarations for
	types (and classes) that are bridged between C++ and Python. This file
	needs to be adapted when new C++ types are to be bridged to Python. There's
	also a section that lists synonym types, because bgen does not handle
	namespaces optimally.
	
	Finally this file drives the C++ code generation process, so if additional
	header files need to be included or something else needs to be tweaked this
	is the place to look.
amiscorescan.py:
	First pass of the generation process: parsing the header files, filtering
	the classes, methods and functions and transforming C++ calling sequences
	to more Pythonesque calling sequences. the "input" variable in main()
	contains the list of input files, which may need to be extended if new
	header files are added.
	
	The makeblacklistnames() method returns a list of methods that should not
	be bridged.
	
	The makeblacklisttypes() method returns a list of types that should not be
	bridged to Python. Note that not bridging a type automatically means that any
	C++ method or function that uses this type as argument or return value will
	also be blacklisted automatically.
	
	Makegreylist() returns a list of (ifdef, methodlist) pairs. The methods in
	methodlist will be generated, but bracketed by the given ifdef. Use this to
	generate methods only whenever some C preprocessor symbol is defined.
	
	Makerepairinstructions() returns the list of function call signature modifications
	that needs to be made. This is a very powerful mechanism, but also rather complicated.
	Check what is there and look at amiscoregen.py, and maybe you will understand
	how it works.
amiscoremodule.h and amiscoremodule.cpp:
	Definitions and implementation of the bridge, which allows calling
	C++ methods (and subclassing C++ classes) from Python. Generated, don't touch.
